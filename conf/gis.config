params {
    decont_refpath = '/mnt/genomeDB/genomeIndices/hg19/bwa_index/nucleotide/'
    decont_index   = 'hg19.fa'
    kraken2_index  = '/mnt/genomeDB/misc/softwareDB/kraken2/minikraken2_v2_8GB_201904_UPDATE'
}


process {
    executor = 'sge'
    clusterOptions = { '-V' }
    penv = 'OpenMP' // task.cpus = automagically added
    maxRetries = 3
    errorStrategy = { task.attempt < 2 ? 'retry' : 'finish' }
    //TODO: find a cleaner way to code this? This is potentially solved by PS:
    // https://github.com/nextflow-io/nextflow/pull/1324/commits/bf0a30b3e6111cd82557803d027dfc0244b20208
    withName:"DECONT" {
        beforeScript = { ". /mnt/software/unstowable/miniconda3-4.6.14/etc/profile.d/conda.sh; conda activate shotgunMetagenomics_fastp_v0.20.0 " }
    }
    withName:"KRAKEN2|BRACKEN" {
        beforeScript = { ". /mnt/software/unstowable/miniconda3-4.6.14/etc/profile.d/conda.sh; conda activate shotgunMetagenomics_kraken_v2.0.8 " }
    }
    
    pollInterval = '30 sec'
    exitReadTimeout = "120 sec"
}

	 
/*
// GIS environments
shotgunMetagenomics_fastp_v0.20.0 
shotgunMetagenomics_humann_v2.9   
shotgunMetagenomics_kraken_v2.0.8 
shotgunMetagenomics_metaphlan_v2.9
*/